 :root {
	 --bg:#010101;
	 --panel:#0c0c0c;
	 --card:#111;
	 --accent:#0af5ff;
	 --accent-strong:#25b3ff;
	 --text:#f5f6f7;
	 --muted:#8b8f96;
	 --border:rgba(255,255,255,0.08);
	 --shadow:0 12px 40px rgba(0,0,0,0.4);
	 font-family:'Space Grotesk', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
 }

 * { box-sizing:border-box; }

 body.theme-dark {
	 margin:0;
	 min-height:100vh;
	 background:radial-gradient(circle at top,#090909 0%,#000 45%,#000 100%);
	 color:var(--text);
 }

 .shell {
	 display:flex;
	 gap:32px;
	 padding:32px;
	 padding-right:428px; /* leave room for floating insights (360px + 32px gap + 36px margin) */
 }

 .side-rail {
	 width:240px;
	 background:var(--panel);
	 border:1px solid var(--border);
	 border-radius:18px;
	 padding:24px;
	 box-shadow:var(--shadow);
	 position:sticky;
	 top:24px;
	 height:fit-content;
 }

 .brand { display:flex; gap:12px; align-items:center; }
 .logo {
	 width:46px;
	 height:46px;
	 border-radius:50%;
	 display:grid;
	 place-items:center;
	 background:linear-gradient(135deg,#111,#1f1f1f);
	 color:var(--accent);
	 font-weight:600;
	 font-size:1.4rem;
 }
 .eyebrow { text-transform:uppercase; letter-spacing:0.15em; font-size:0.65rem; color:var(--accent); margin:0 0 6px; }
 h1{margin:0;font-size:1.2rem;}
 h2{margin:0;font-size:2rem;}
 h3{margin:0;font-size:1.1rem;}
 p{margin:0;}
.muted{color:var(--muted);}
.small{font-size:0.8rem;}

 nav { display:flex; flex-direction:column; gap:8px; margin-top:18px; }
 .nav-link {
	 display:flex;
	 align-items:center;
	 gap:10px;
	 padding:10px 14px;
	 border-radius:10px;
	 color:var(--text);
	 text-decoration:none;
	 transition:.2s ease;
	 border:1px solid transparent;
 }
 .nav-link:hover { border-color:var(--border); background:#131313; }
 .nav-link.active { border-color:var(--accent); color:var(--accent); }

 .content { flex:1; display:flex; flex-direction:column; gap:28px; }

 .hero {
	 background:linear-gradient(135deg,#0d0d0d,#050505 70%);
	 border:1px solid var(--border);
	 border-radius:24px;
	 padding:28px;
	 display:flex;
	 gap:32px;
	 box-shadow:var(--shadow);
 }
.cta-row { display:flex; gap:16px; align-items:center; margin-top:16px; flex-wrap:wrap; }
 .ghost,
 .link,
 .primary {
	 font-family:inherit;
	 font-size:0.95rem;
	 cursor:pointer;
	 border-radius:999px;
	 border:1px solid transparent;
	 background:none;
	 color:var(--text);
	 padding:10px 18px;
	 display:inline-flex;
	 gap:8px;
	 align-items:center;
	 text-decoration:none;
	 transition:.2s ease;
 }
 .ghost { border-color:var(--border); }
 .ghost:hover { border-color:var(--accent); color:var(--accent); }
 .link { color:var(--accent); padding:0; border:none; }
 .primary { background:linear-gradient(120deg,var(--accent-strong),var(--accent)); color:#000; font-weight:600; border:none; }
 .primary:hover { filter:brightness(1.1); }

 .prediction-form {
	 width:420px;
	 background:#050505;
	 border:1px solid var(--border);
	 border-radius:18px;
	 padding:20px;
 }
 .form-grid { display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:14px; }
 label { font-size:0.8rem; display:flex; flex-direction:column; gap:6px; color:var(--muted); }
 input, select {
	 background:#111;
	 border:1px solid var(--border);
	 border-radius:10px;
	 padding:10px 12px;
	 color:var(--text);
	 font-size:0.95rem;
 }
 input:focus, select:focus { outline:1px solid var(--accent); border-color:var(--accent); }
 .form-actions { display:flex; align-items:center; justify-content:space-between; margin-top:14px; }

 .chart-grid {
	 display:grid;
	 grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));
	 gap:18px;
 }
 .card {
	 background:var(--card);
	 border:1px solid var(--border);
	 border-radius:18px;
	 padding:18px;
	 min-height:260px;
	 box-shadow:var(--shadow);
	 position:relative;
 }
 .card.wide { grid-column:span 2; }
 .card-head { display:flex; align-items:center; gap:10px; margin-bottom:8px; color:var(--accent); }
 .chart { min-height:220px; }

 .insights-float {
	 position:fixed;
	 top:30px;
	 right:24px;
	 width:360px;
	 background:var(--panel);
	 border:1px solid var(--border);
	 border-radius:18px;
	 padding:24px;
	 box-shadow:var(--shadow);
	 overflow-y:auto;
	 height:auto;
	 max-height:calc(100vh - 48px);
	 display:flex;
	 flex-direction:column;
 }
 .insights-float ul { list-style:none; padding:0; margin:12px 0; display:flex; flex-direction:column; gap:8px; }
 .insights-float li { padding:10px 12px; background:#0e0e0e; border-radius:12px; border:1px solid var(--border); font-size:0.9rem; }
 .prediction-output { margin-top:8px; padding:12px; border:1px dashed var(--border); border-radius:12px; background:#050505; }
 .shortfall-warning { color:#ff8c00; margin:8px 0; font-size:0.9rem; padding:8px 12px; background:rgba(255,140,0,0.1); border-radius:8px; border:1px solid rgba(255,140,0,0.3); }
 .insights-loading { text-align:center; padding:24px 12px; }
 .insights-loading p { margin-top:12px; color:var(--muted); font-size:0.9rem; }
 .loading-spinner {
	 width:40px;
	 height:40px;
	 margin:0 auto;
	 border-radius:50%;
	 border:3px solid rgba(37,179,255,0.2);
	 border-top-color:var(--accent);
	 animation:spin 1s linear infinite;
 }

 .loading-overlay {
	 position:fixed;
	 inset:0;
	 background:rgba(0,0,0,0.6);
	 display:flex;
	 align-items:center;
	 justify-content:center;
	 z-index:999;
 }
 .loader { text-align:center; background:#050505; padding:20px 28px; border-radius:16px; border:1px solid var(--border); box-shadow:var(--shadow); }
 .loader p { margin: 12px 0 4px; }
 .loader .muted { font-size: 0.9rem; color: var(--accent); font-weight: 500; }
 .spinner {
	 width:48px;
	 height:48px;
	 border-radius:50%;
	 border:4px solid rgba(255,255,255,0.1);
	 border-top-color:var(--accent);
	 display:inline-block;
	 animation:spin 1s linear infinite;
 }
 @keyframes spin { to { transform:rotate(360deg); } }

 .prediction-output strong { color:var(--accent); }

 /* Input Studio - Modern Layout */
 .alt-page { 
	 padding:0;
	 background:var(--bg);
	 min-height:100vh;
 }

 .top-nav {
	 background:var(--panel);
	 border-bottom:1px solid var(--border);
	 padding:16px 32px;
	 display:flex;
	 justify-content:space-between;
	 align-items:center;
	 position:sticky;
	 top:0;
	 z-index:100;
	 box-shadow:0 2px 8px rgba(0,0,0,0.3);
 }

 .brand-mini {
	 display:flex;
	 align-items:center;
	 gap:12px;
 }

 .brand-mini h1 {
	 font-size:1.1rem;
	 margin:0;
 }

 .input-hero {
	 background:linear-gradient(135deg,#0d0d0d,#050505);
	 border-bottom:1px solid var(--border);
	 padding:48px 32px;
	 text-align:center;
 }

 .hero-content h2 {
	 margin:12px 0 16px;
	 font-size:2.5rem;
 }

 .hero-content .description {
	 max-width:700px;
	 margin:0 auto;
	 line-height:1.6;
	 color:var(--muted);
 }

 .required-indicator {
	 color:var(--accent);
	 font-weight:600;
 }

 .input-container {
	 max-width:1600px;
	 margin:0 auto;
 }

 .content-wrapper {
	 display:grid;
	 grid-template-columns:1fr 420px;
	 gap:24px;
	 padding:32px;
	 align-items:start;
 }

 .form-section {
	 background:var(--panel);
	 border:1px solid var(--border);
	 border-radius:20px;
	 padding:32px;
	 box-shadow:var(--shadow);
 }

 .results-section {
	 position:sticky;
	 top:24px;
	 align-self:flex-start;
	 z-index:10;
 }

 .results-sticky {
	 background:var(--panel);
	 border:1px solid var(--border);
	 border-radius:20px;
	 padding:24px;
	 box-shadow:var(--shadow);
	 max-height:calc(100vh - 48px);
	 overflow-y:auto;
	 position:sticky;
	 top:24px;
 }

 .results-sticky h3 {
	 display:flex;
	 align-items:center;
	 gap:10px;
	 color:var(--accent);
	 margin-bottom:20px;
 }

 /* Modern Form Styles */
 .modern-form {
	 display:flex;
	 flex-direction:column;
	 gap:32px;
 }

 .form-section-header {
	 margin-bottom:24px;
 }

 .form-section-header h3 {
	 display:flex;
	 align-items:center;
	 gap:10px;
	 color:var(--accent);
	 margin-bottom:8px;
 }

 .section-description {
	 color:var(--muted);
	 font-size:0.9rem;
 }

 .form-row {
	 display:grid;
	 grid-template-columns:repeat(2, 1fr);
	 gap:20px;
 }

 .form-field {
	 display:flex;
	 flex-direction:column;
	 gap:8px;
 }

 .form-field.full-width {
	 grid-column:span 2;
 }

 .form-field label {
	 font-weight:500;
	 font-size:0.9rem;
	 color:var(--text);
	 display:flex;
	 align-items:center;
	 gap:4px;
 }

 .required {
	 color:#ff4444;
 }

 .field-hint {
	 font-size:0.75rem;
	 color:var(--muted);
	 margin-top:-4px;
 }

 .divider {
	 height:1px;
	 background:var(--border);
	 margin:16px 0;
 }

 /* Expense Accordion */
 .expense-accordion {
	 background:#0a0a0a;
	 border:1px solid var(--border);
	 border-radius:16px;
	 padding:24px;
 }

 .accordion-header {
	 display:flex;
	 justify-content:space-between;
	 align-items:center;
	 cursor:pointer;
	 list-style:none;
	 user-select:none;
 }

 .accordion-header::-webkit-details-marker {
	 display:none;
 }

 .accordion-header h3 {
	 display:flex;
	 align-items:center;
	 gap:10px;
	 color:var(--accent);
	 margin:0;
 }

 .toggle-icon {
	 transition:transform 0.3s ease;
	 font-size:1.5rem;
	 color:var(--accent);
 }

 .expense-accordion[open] .toggle-icon {
	 transform:rotate(180deg);
 }

 .accordion-content {
	 margin-top:24px;
	 display:flex;
	 flex-direction:column;
	 gap:24px;
 }

 .expense-category-section {
	 padding:16px;
	 background:#050505;
	 border:1px solid var(--border);
	 border-radius:12px;
 }

 .expense-category-section h4 {
	 display:flex;
	 align-items:center;
	 gap:8px;
	 margin:0 0 16px;
	 color:var(--text);
	 font-size:1rem;
 }

 /* Form Actions */
 .form-actions-sticky {
	 display:flex;
	 gap:16px;
	 padding-top:24px;
	 border-top:1px solid var(--border);
 }

 .primary-large {
	 flex:1;
	 background:linear-gradient(120deg,var(--accent-strong),var(--accent));
	 color:#000;
	 font-weight:600;
	 border:none;
	 border-radius:12px;
	 padding:16px 24px;
	 font-size:1rem;
	 cursor:pointer;
	 display:flex;
	 align-items:center;
	 justify-content:center;
	 gap:10px;
	 transition:0.2s ease;
	 font-family:inherit;
 }

 .primary-large:hover {
	 filter:brightness(1.1);
	 transform:translateY(-2px);
	 box-shadow:0 8px 24px rgba(10,245,255,0.3);
 }

 .secondary {
	 background:#111;
	 border:1px solid var(--border);
	 color:var(--text);
	 border-radius:12px;
	 padding:16px 24px;
	 cursor:pointer;
	 display:flex;
	 align-items:center;
	 gap:8px;
	 transition:0.2s ease;
	 font-family:inherit;
	 font-size:1rem;
 }

 .secondary:hover {
	 border-color:var(--accent);
	 color:var(--accent);
 }

 /* Empty State */
 .empty-state {
	 text-align:center;
	 padding:32px;
	 color:var(--muted);
 }

 .empty-state i {
	 font-size:3rem;
	 color:var(--border);
	 margin-bottom:16px;
	 display:block;
 }

 .empty-state p {
	 margin:12px 0;
	 font-size:1rem;
 }

 /* Footer */
 .page-footer {
	 background:var(--panel);
	 border-top:1px solid var(--border);
	 padding:24px 32px;
	 display:flex;
	 justify-content:space-between;
	 align-items:center;
	 margin-top:48px;
 }

 @media (max-width:1100px) {
	 .shell { flex-direction:column; padding-right:32px; }
	 .side-rail { width:100%; position:static; }
	 .insights-float { position:static; width:100%; height:auto; margin:24px auto; }
 }

 /* Expense Details Accordion */
 .expense-details {
	 margin-top:16px;
	 padding:16px;
	 background:#050505;
	 border:1px solid var(--border);
	 border-radius:12px;
 }
 .expense-details summary {
	 cursor:pointer;
	 font-weight:600;
	 display:flex;
	 align-items:center;
	 gap:8px;
	 color:var(--accent);
	 list-style:none;
	 user-select:none;
 }
 .expense-details summary:hover { color:var(--accent-strong); }
 .expense-details summary::-webkit-details-marker { display:none; }
 .expense-details[open] summary { margin-bottom:16px; }

 /* Expense Breakdown Display */
 .expense-breakdown {
	 margin-top:20px;
	 padding:16px;
	 background:#050505;
	 border:1px solid var(--border);
	 border-radius:12px;
 }
 .expense-breakdown h4 {
	 display:flex;
	 align-items:center;
	 gap:8px;
	 color:var(--accent);
	 margin-bottom:16px;
 }
 .breakdown-summary {
	 padding:12px;
	 background:#0a0a0a;
	 border-radius:8px;
	 margin-bottom:16px;
	 border-left:3px solid var(--accent);
 }
 .breakdown-summary .highlight {
	 color:var(--accent);
	 font-weight:600;
	 margin-top:8px;
 }
 .expense-category {
	 margin-bottom:12px;
	 padding:12px;
	 background:#0e0e0e;
	 border-radius:10px;
	 border:1px solid var(--border);
 }
 .expense-category.status-high { border-left:3px solid #ff4444; }
 .expense-category.status-moderate { border-left:3px solid #ffaa00; }
 .expense-category.status-good { border-left:3px solid #00ff88; }
 
 /* Real-time expense warnings */
 .expense-warning {
	 display:flex;
	 align-items:flex-start;
	 gap:8px;
	 margin-top:6px;
	 padding:10px 12px;
	 border-radius:8px;
	 font-size:0.85rem;
	 line-height:1.4;
	 animation:fadeIn 0.3s ease-in-out;
 }
 
 .expense-warning-high {
	 background:rgba(255,68,68,0.1);
	 border:1px solid rgba(255,68,68,0.3);
	 color:#ff6b6b;
 }
 
 .expense-warning-moderate {
	 background:rgba(255,170,0,0.1);
	 border:1px solid rgba(255,170,0,0.3);
	 color:#ffaa00;
 }
 
 .expense-warning-good {
	 background:rgba(0,255,136,0.1);
	 border:1px solid rgba(0,255,136,0.3);
	 color:#00ff88;
 }
 
 .warning-icon {
	 flex-shrink:0;
	 font-size:1rem;
	 margin-top:1px;
 }
 
 .warning-text {
	 flex:1;
 }
 
 @keyframes fadeIn {
	 from {
		 opacity:0;
		 transform:translateY(-5px);
	 }
	 to {
		 opacity:1;
		 transform:translateY(0);
	 }
 }
 
 .category-header {
	 display:flex;
	 justify-content:space-between;
	 align-items:center;
	 margin-bottom:10px;
 }
 .category-header h5 {
	 margin:0;
	 font-size:1rem;
 }
 .status-badge {
	 padding:4px 10px;
	 border-radius:12px;
	 background:#111;
	 font-size:0.8rem;
 }
 .category-details {
	 display:flex;
	 flex-direction:column;
	 gap:6px;
	 margin-bottom:10px;
 }
 .detail-row {
	 display:flex;
	 justify-content:space-between;
	 font-size:0.9rem;
 }
 .detail-row.saving {
	 background:#0a2a1a;
	 padding:6px 8px;
	 border-radius:6px;
	 margin-top:4px;
 }
 .category-advice {
	 padding-top:10px;
	 border-top:1px solid var(--border);
	 font-size:0.85rem;
	 color:var(--muted);
 }
 .category-advice p {
	 margin:4px 0;
 }

 /* Recommendations Panel */
 .recommendations-panel {
	 margin-top:20px;
	 padding:16px;
	 background:#050505;
	 border:1px solid var(--border);
	 border-radius:12px;
 }
 .recommendations-panel h4 {
	 display:flex;
	 align-items:center;
	 gap:8px;
	 color:var(--accent);
	 margin-bottom:12px;
 }
 .recommendations-panel ul {
	 list-style:none;
	 padding:0;
	 margin:0;
 }
 .recommendations-panel li {
	 padding:10px 12px;
	 background:#0e0e0e;
	 border-radius:8px;
	 margin-bottom:8px;
	 border-left:3px solid var(--accent);
	 font-size:0.9rem;
 }
 
 /* Enhanced recommendation item styles */
 .recommendation-section-header {
	 background:linear-gradient(135deg,#1a1a2e,#16213e) !important;
	 border-left:4px solid var(--accent) !important;
	 font-weight:700;
	 font-size:1rem !important;
	 padding:14px 16px !important;
	 margin:16px 0 10px 0 !important;
	 letter-spacing:0.5px;
	 text-transform:uppercase;
 }
 
 .recommendation-subheader {
	 background:#0a0a0a !important;
	 border-left:3px solid #ffaa00 !important;
	 font-weight:600;
	 padding:12px 14px !important;
	 margin-bottom:6px !important;
	 color:#ffdd77;
 }
 
 .recommendation-detail {
	 background:#060606 !important;
	 border-left:2px solid #444 !important;
	 padding:8px 12px 8px 24px !important;
	 margin-bottom:4px !important;
	 margin-left:20px;
	 font-size:0.85rem !important;
	 color:#b0b0b0;
 }
 


 /* Tooltip Styles */
 label[title] {
	 cursor:help;
	 position:relative;
 }
 label[title]:hover::after {
	 content:attr(title);
	 position:fixed;
	 background:#111;
	 border:1px solid var(--accent);
	 border-radius:8px;
	 padding:10px 14px;
	 font-size:0.8rem;
	 line-height:1.4;
	 white-space:normal;
	 max-width:min(300px, 90vw);
	 z-index:10000;
	 box-shadow:0 6px 20px rgba(0,0,0,0.7);
	 pointer-events:none;
	 color:var(--text);
	 transform:translateY(-50%);
	 left:50%;
	 top:50%;
	 margin-left:-150px;
 }
 @supports (width: min(300px, 90vw)) {
	 label[title]:hover::after {
		 left:50%;
		 top:20%;
		 transform:translateX(-50%);
		 margin-left:0;
	 }
 }

 @media (max-width:1200px) {
	 .content-wrapper {
		 grid-template-columns:1fr;
		 padding:24px;
	 }
	 .results-section {
		 position:static;
	 }
	 .results-sticky {
		 max-height:none;
	 }
 }

 @media (max-width:768px) {
	 .hero { flex-direction:column; }
	 .form-grid { grid-template-columns:1fr; }
	 .shell { padding:20px; }
	 .insights-float { min-height:200px; }
	 .top-nav { padding:12px 16px; }
	 .input-hero { padding:32px 20px; }
	 .hero-content h2 { font-size:1.8rem; }
	 .content-wrapper { padding:16px; }
	 .form-section { padding:20px; }
	 .form-row { grid-template-columns:1fr; }
	 .form-field.full-width { grid-column:span 1; }
	 .page-footer { flex-direction:column; gap:12px; text-align:center; }
	 label[title]:hover::after {
		 max-width:85vw;
		 font-size:0.75rem;
		 padding:8px 12px;
		 top:30%;
	 }
	 .expense-category { font-size:0.9rem; }
	 .recommendations-panel li { font-size:0.85rem; }
 }
